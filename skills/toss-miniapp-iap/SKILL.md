---
description: "앱인토스 인앱 결제(IAP) 관련 질문에 사용하세요. 트리거 키워드: 인앱 결제, IAP, in-app purchase, 소모성 상품, 비소모성 상품, 소모품, 비소모품, 인앱결제 연동, 인앱결제 개발, getProductItemList, createOneTimePurchaseOrder, completeProductGrant, getPendingOrders, getCompletedOrRefundedOrders, 주문 상태 조회, 주문 복원, 결제 성공 콜백, 샌드박스 테스트, 인앱결제 수수료, 인앱결제 환불, 상품 등록, 공급가, 판매가, 인앱결제 QA, 정산 정보 등록, PURCHASED, PAYMENT_COMPLETED, PRODUCT_NOT_GRANTED_BY_PARTNER"
---

# 앱인토스 인앱 결제(IAP) 가이드

## 목차

1. [인앱 결제 이해하기](#인앱-결제-이해하기)
2. [콘솔 가이드](#콘솔-가이드)
3. [개발하기](#개발하기)
4. [QA 진행하기](#qa-진행하기)

---

## 인앱 결제 이해하기

앱인토스의 인앱 결제를 연동해 디지털 상품과 권한, 콘텐츠를 손쉽게 판매해 보세요.
구매 흐름을 짧게 만들면 사용자는 더 쉽게 결제하고, 매출은 빠르게 늘릴 수 있어요.

### 인앱 결제란 무엇인가요

인앱 결제는 앱 안에서 유료 상품을 바로 구매할 수 있는 결제 방식이에요.
사용자는 앱을 떠나지 않고도 필요한 기능이나 아이템, 콘텐츠를 결제할 수 있어요.
인앱 결제 상품은 소모성 아이템과 비소모성 아이템으로 나뉘어요.

* **소모성 아이템:** 사용하면 사라지는 상품이에요. 다시 사용하려면 다시 구매해야 해요.
  * 예: 게임 아이템, 코인, 힌트 이용권
* **비소모성 아이템:** 한 번 구매하면 계속 사용할 수 있는 상품이에요.
  * 예: 프리미엄 기능 해제, 광고 제거, 특정 콘텐츠 이용 권한

### 인앱 결제를 사용하면 어떤 점이 좋나요

* 사용자가 앱을 벗어나지 않고 바로 결제할 수 있어, 결제 중 이탈을 줄일 수 있어요.
* 앱 출시 초기부터 유료 아이템이나 구독 상품을 판매해 바로 수익을 만들 수 있어요.
* 소모성 아이템과 비소모성 아이템을 함께 구성해 다양한 결제 모델을 만들 수 있어요.
* 사용 목적에 맞는 상품을 제공해 매출을 더 크게 키울 수 있어요.

### 참고해 주세요

* 인앱 결제 환불은 Apple과 Google의 정책을 따르고 있어요.
* 판매가는 공급가에 부가가치세(VAT)가 더해진 금액이에요.
* 결제가 진행되는 동안 앱 안의 기능, 예를 들면 음악이나 영상 재생은 잠시 멈추고 결제가 끝나면 자동으로 다시 이어지도록 처리해 주세요.

---

## 콘솔 가이드

### 1. 사업자 정보 등록하기

인앱 결제를 연동하려면 먼저 사업자 정보를 등록해야 해요.
사업자 정보가 등록되어 있어야 이후 단계인 약관 동의와 정산 정보 입력을 진행할 수 있어요.
사업자 정보 등록 방법은 [다음 가이드](https://developers-apps-in-toss.toss.im/prepare/register-business.html)를 참고해 주세요.

### 2. 정산 정보 입력하기

인앱 결제 수익을 정산받으려면 정산 정보를 등록해야 해요.
워크스페이스의 '정보' 탭에서 정산 정보를 입력한 뒤 검토 요청을 해 주세요.
검토에는 영업일 기준 평균 2~3일이 걸려요.

> **꼭 확인해 주세요**
> 예금주명은 통장 사본에 적힌 이름과 한 글자도 다르지 않게 입력해 주세요.
> 다르게 입력하면 정산이 지연될 수 있어요.

### 3. 인앱 상품 등록하기

상품 정보를 정확하게 입력하면 사용자가 구매 내용을 명확히 이해할 수 있고,
운영 중 분쟁이나 환불 이슈를 줄일 수 있어요.

#### 상품 유형

상품의 사용 방식에 맞게 유형을 선택해 주세요.
현금성, 환가성 상품이나 토스 포인트와 결합해 제공하는 상품은 판매할 수 없어요.

* **소모품**
  사용하면 소진되는 상품이에요. 다시 사용하려면 재구매해야 해요.
  예를 들어 게임 아이템, 내부 재화 충전, 1회 이용권이 있어요.
* **비소모품**
  한 번 구매하면 계속 사용할 수 있는 상품이에요.
  예를 들어 광고 제거, 소장형 콘텐츠가 있어요.

#### 상품명

상품명은 사용자가 받는 기능과 조건을 그대로 드러내야 해요.

* 실제 제공 내용과 일치하게 작성해 주세요.
* 과장하거나 오해를 부르는 표현은 사용할 수 없어요.
  예를 들어 이용 기간이 정해져 있는데도 "무제한"이라고 쓰면 안 돼요.

#### 상품 이미지

상품 이미지는 사용자가 상품을 직관적으로 이해할 수 있도록 구성해 주세요.

* "30일 이용권", "100코인"처럼 식별에 필요한 텍스트를 넣을 수 있어요.
* 이벤트성 문구를 넣는 경우, 반드시 이벤트 기간을 함께 표시해 주세요.
* 해상도는 1024 × 1024px로 등록해야 해요.
* 저작권 문제가 없는 이미지만 사용해야 해요. 이미지는 파트너사가 직접 확보해야 해요.
* 선정적이거나 폭력적이거나 불쾌감을 줄 수 있는 이미지는 사용할 수 없어요.

#### 공급가

공급가는 부가가치세(VAT)가 제외된 금액이에요.

* 최소 400원부터 최대 1,400,000원까지 설정할 수 있어요.
* 10원 단위로만 입력할 수 있어요.
* 공급가를 입력하면 판매가는 자동으로 계산돼요.
* 판매가를 먼저 입력해 공급가를 자동 계산하는 기능은 현재 지원하지 않아요.

#### 판매가

판매가는 사용자가 실제로 결제하는 최종 금액이에요.
공급가에 부가가치세가 더해진 금액으로 자동 설정돼요.

상품 등록을 완료하면 상품 목록 화면에서 등록된 상품을 확인할 수 있어요.

### 4. 결제, 환불 내역 확인하기

#### 결제 내역

유저가 미니앱에서 결제한 상품 내역이에요.

#### 마켓별 환불 정책

인앱결제 환불은 사용자의 운영체제(OS)와 마켓 정책에 따라 처리 방식이 달라요.

**Android 환불 정책**

안드로이드 사용자가 앱에서 환불을 요청하면, 앱인토스 콘솔에서 요청 내역을 확인할 수 있어요.

* 사용자는 토스 앱에서 직접 환불을 요청해요.
* 파트너사는 앱인토스 콘솔의 '환불 내역' 메뉴에서 요청 건을 확인하고 승인 또는 반려를 처리할 수 있어요.
* 단, 최종 승인과 거절 여부는 Google Play가 결정해요.

환불 처리 결과는 다음과 같이 안내돼요.

* 사용자에게 푸시 알림으로 발송돼요.
* 사용자는 주문 상세 화면에서도 처리 결과를 확인할 수 있어요.
* 파트너사 또는 Google Play가 환불을 거절한 경우에도 동일하게 알림이 발송돼요.

파트너사는 내부 정책과 Google Play 정책을 함께 검토한 뒤 환불 요청을 처리해 주세요.

**iOS 환불 정책**

iOS 사용자의 환불은 Apple이 전적으로 관리해요.

* 모든 환불은 Apple이 직접 판단하고 승인해요.
* 파트너사는 환불을 승인하거나 거절할 수 없어요.
* Apple은 환불 요청 기능을 외부에 제공하지 않아요.
* 파트너사는 결제 상태 조회 API로 상태만 확인할 수 있어요.

따라서 iOS 결제 건은 환불 처리 권한이 없으며, 결제 상태 조회만 가능해요.

#### 환불 내역

유저가 환불을 요청한 내역이에요. 환불 요청사유를 확인하고 요청 반려 및 요청 승인을 할 수 있어요.
인앱결제로 결제한 사용자는 토스 앱에서 '환불받기' 버튼을 눌러 환불을 요청할 수 있어요.

#### 환불 요청 승인

파트너사가 환불 요청을 승인한 내역이에요. 요청을 승인하면, 앱마켓에 심사가 요청돼요.

#### 환불 요청 반려

파트너사가 환불 요청을 반려하건, 앱마켓에서 환불을 반려한 내역이에요.

#### 환불 완료

앱 마켓에서 환불이 완료된 내역이에요.

### 5. 성과 대시보드

개발과 연동을 완료한 인앱 결제의 성과 지표를 한 화면에서 확인할 수 있어요.
매출 흐름과 사용자의 결제 행동을 함께 분석해 상품 구성과 운영 전략을 개선해 보세요.
데이터는 D+1 오전 8시 이후부터 순차적으로 업데이트돼요.

* **매출 지표**
  * 총 결제 금액, 총 매출, 결제자당 평균 매출, 결제 유저당 매출
* **사용자 지표**
  * 활성 유저 수, 결제 유저 수, 신규 결제 유저 수, 재결제 유저 수, 결제율, 최종 전환율

### 자주 묻는 질문 (콘솔)

**Q. 인앱결제 수수료는 어떻게 되나요?**

인앱결제 수수료는 앱마켓 수수료 15% (향후 매출에 따라 변동 가능) + 토스 수수료 5%가 적용돼요. 자세한 내용은 정산 이해하기 메뉴의 ['인앱결제'](https://developers-apps-in-toss.toss.im/settlement/intro.html#_3-인앱-결제-수수료) 항목을 확인해 주세요.

**Q. 인앱결제 테스트를 하고 싶어요.**

인앱결제는 샌드박스에서 테스트할 수 있어요. [가이드](https://developers-apps-in-toss.toss.im/iap/develop.html#샌드박스-테스트)를 확인해주세요.

**Q. 사용자가 환불을 희망할 경우 어떻게 해야 하나요?**

* iOS 사용자의 경우 애플 고객센터로 안내해 주세요. (애플에 모든 권한이 있어요.)
* 안드로이드 사용자의 경우 토스 앱 내에서 환불 신청을 할 수 있게 안내해 주세요.

---

## 개발하기

> **주의하세요**
>
> * SDK **1.1.3 버전 이상**을 사용해주세요.
>   * SDK 1.1.3 버전부터는 **상품 지급 완료 과정**이 추가되어 함수 인터페이스가 변경되었어요.
> * SDK **1.2.2 버전**부터는 **구매 복원 기능**이 추가되었어요.
> * **사용자의 기기가 변경되더라도 인앱결제 상품이 지급 유지될 수 있도록 반드시 연동해주세요.**
>   * [네이티브 저장소 기능](https://developers-apps-in-toss.toss.im/bedrock/reference/framework/저장소/Storage.md)을 활용해 주세요.
>   * 토스 로그인 연동과 인앱결제 상태 조회 API를 활용해 주세요.
> * 인앱결제 상태 조회 API 사용을 위해서는 사전에 필히 [토스 로그인 연동](https://developers-apps-in-toss.toss.im/login/intro.md)을 진행해 주세요.

**BaseURL:** `https://apps-in-toss-api.toss.im`

### 1. 상품 목록 가져오기

**SDK를 통해 연동해 주세요.**

콘솔에 등록한 인앱결제 상품 목록을 가져와요.
가져온 상품 목록은 화면에 표시할 때 사용해요.

자세한 내용은 [IapProductListItem](https://developers-apps-in-toss.toss.im/bedrock/reference/framework/인앱%20결제/getProductItemList.md) 페이지를 확인해 주세요.

### 2. 인앱결제 요청하기

**SDK를 통해 연동해 주세요.**

인앱결제 결제창을 띄우고, 사용자가 결제를 진행해요.
결제 완료 후 앱인토스 서버가 실제 결제 여부를 검증하며, **구글/애플 영수증까지 확인해요.**
만약 결제 중에 에러가 발생하면 에러 유형에 따라 에러 페이지로 이동해요.

**SDK 1.1.3 버전부터는 결제 성공 시 파트너사 상품 지급 로직이 실행돼요.**
파트너사 상품 지급 로직이 정상적으로 완료되면 콜백(`event.type: success`)이 전달돼요.
지급 실패 시에는 `PRODUCT_NOT_GRANTED_BY_PARTNER` 오류 코드가 전달돼요. (토스앱 5.230.0 이상 지원)

자세한 내용은 인앱 결제 문서의 [createOneTimePurchaseOrder](https://developers-apps-in-toss.toss.im/bedrock/reference/framework/인앱%20결제/IAP.md#createonetimepurchaseorder)를 확인해주세요.

> **주의하세요**
>
> 환불 권한은 **앱마켓**에 있어요.
> 앱마켓 환불 요청 및 승인 여부는 앱인토스에서 보장할 수 없으므로, 테스트는 반드시 **소액**으로 진행해 주세요.
>
> **SDK 1.1.3 버전부터는 지급 완료 과정이 추가되었어요.**
> 함수 인터페이스가 변경되어, SDK 업데이트 시 꼭 코드 수정을 해주세요.

### 3. 주문 복원하기

**SDK를 통해 연동해 주세요.**

미결 주문을 조회하여 사용자에게 상품을 지급하고, 해당 주문의 상태를 업데이트합니다.

* `getPendingOrders`
  * 결제는 완료되었지만 상품이 아직 지급되지 않은 주문 목록을 조회해요.
  * 조회된 주문의 `orderId`를 확인하여 사용자에게 상품을 지급하세요.

* `completeProductGrant`
  * 대기 중인 주문의 상품 지급을 완료 처리합니다.
  * 사용자에게 상품을 지급한 뒤, `completeProductGrant`를 호출하여 지급 상태를 완료로 변경하세요.

앱 버전이 최소 지원 버전(안드로이드 5.231.0, iOS 5.231.0)보다 낮으면 undefined를 반환해요.

자세한 내용은 인앱 결제 문서의 [getPendingOrders](https://developers-apps-in-toss.toss.im/bedrock/reference/framework/인앱%20결제/IAP.md#getPendingOrders) 및 [completeProductGrant](https://developers-apps-in-toss.toss.im/bedrock/reference/framework/인앱%20결제/IAP.md#completeProductGrant)를 확인해주세요.

### 4. 주문 조회하기

결제 및 상품 지급이 완료된 주문, 또는 환불된 주문의 상태를 조회할 수 있어요.
SDK와 API 두 가지 방식 중 상황에 맞게 선택해 사용해 주세요.

#### 1) SDK로 조회하기

`getCompletedOrRefundedOrders`는 인앱결제로 구매한 뒤 결제 및 지급이 완료된 주문과 환불된 주문 목록을 조회해요.
결제는 완료되었지만 상품이 지급되지 않은 주문은 조회되지 않아요.

앱 버전이 최소 지원 버전(안드로이드 5.231.0, iOS 5.231.0)보다 낮으면 undefined를 반환해요.

자세한 내용은 인앱 결제 문서의 [getCompletedOrRefundedOrders](https://developers-apps-in-toss.toss.im/bedrock/reference/framework/인앱%20결제/IAP.md#getCompletedOrRefundedOrders)를 확인해주세요.

#### 2) API로 조회하기

API를 통해 서버에서 인앱결제 주문 상태를 직접 조회할 수 있어요.
승인 혹은 환불 응답을 받지 못한 경우에도 사용할 수 있어요.

> **참고하세요**
> 결제 상태 조회 API 사용을 위해서는 토스 로그인 연동을 먼저 진행해 주세요.

* Content-type : `application/json`
* Method : `POST`
* URL : `/api-partner/v1/apps-in-toss/order/get-order-status`

**요청 헤더**

| 이름 | 타입 | 필수값 여부 | 설명 |
|---|---|---|---|
| x-toss-user-key | string | Y | 토스 로그인을 통해 획득한 userKey 값 |

**요청 파라미터**

| 이름 | 타입 | 필수 | 설명 |
| --- | --- | --- | --- |
| orderId | String | Y | 결제 생성 후 취득한 주문번호(uuid v7) |

```json
{
    "orderId": "13c9a1ff-2baa-4495-bbfa-a0826ba8c7c0"
}
```

**응답**

| 이름 | 타입 | 설명 |
| --- | --- | --- |
| orderId | String | 요청한 주문번호 |
| sku | String | 주문한 상품 ID |
| statusDeterminedAt | String | 주문 완료 일시 (yyyy-MM-dd'T'HH:mm:ssZ) `status`가 `REFUNDED`일 경우 환불 완료 일시 |
| status | String | 주문에 대한 상태 (enum) |
| reason | String | 상태에 대한 설명 |

**status (enum)**

| 상태 | 설명 | 상세 설명 |
| --- | --- | --- |
| PURCHASED | 주문 완료 | 인앱 결제 및 상품 지급이 모두 완료된 상태 |
| PAYMENT\_COMPLETED | 결제 완료 | SDK 1.1.3 이상에서 결제는 완료되었으나 상품 지급이 실패한 상태 |
| FAILED | 주문 실패 | 결제가 실패한 경우 |
| REFUNDED | 주문 환불됨 | 환불 완료된 경우 |
| ORDER\_IN\_PROGRESS | 주문 진행 중 | 주문이 생성되었지만 결제/지급 처리가 완료되지 않은 경우 |
| NOT\_FOUND | 주문 없음 | 해당 주문번호를 찾을 수 없는 경우 |
| MINIAPP\_MISMATCH | 상품 불일치 | 주문한 상품이 해당 앱의 상품이 아닌 경우 |
| ERROR | 내부 오류 | 시스템 내부 오류 발생 시 |

**응답 예시 1 - PAYMENT_COMPLETED**

```json
{
    "resultType": "SUCCESS",
    "success": {
        "orderId": "13c9a1ff-2baa-4495-bbfa-a0826ba8c7c0",
        "sku":"ait.0000010000.af647449.3bd55cfd00.0000000475",
        "statusDeterminedAt":"2025-09-12T16:57:12",
        "status": "PAYMENT_COMPLETED",
        "reason": "결제가 완료되었어요."
    }
}
```

**응답 예시 2 - PURCHASED**

```json
{
    "resultType": "SUCCESS",
    "success": {
        "orderId": "13c9a1ff-2baa-4495-bbfa-0000000000",
        "sku":"ait.0000010000.af647449.00000000000.0000000475",
        "statusDeterminedAt":"2025-09-12T16:57:12",
        "status": "PURCHASED",
        "reason": "완료된 주문이에요."
    }
}
```

---

## 샌드박스 테스트

출시 전에는 반드시 **샌드박스 앱 환경**에서 인앱결제가 정상적으로 동작하는지 테스트해 주세요.
샌드박스에서는 실제 결제(과금)는 발생하지 않으며, 모든 결제가 테스트 시나리오로 처리돼요.

### 1. 샌드박스에서 상품 목록 조회 시 동작

샌드박스 앱에서 `getProductItemList()`를 호출하면 콘솔에 등록된 인앱결제 상품 중 **노출 상태가 ON**인 상품만 조회돼요.

* 실제 콘솔에 등록한 상품 목록이 그대로 내려와요.
* 콘솔에서 **노출 OFF**인 상품은 샌드박스 앱에서도 보이지 않아요.

### 2. 필수 테스트 시나리오

샌드박스에서는 아래 3가지 테스트를 반드시 각각 수행해야 해요.
각 시나리오마다 앱이 올바르게 대응하는지 확인해 주세요.

#### ① 결제 성공 테스트

* 성공 콜백(`event.type: success`)이 정상적으로 전달되는지 확인해요.
* 실제 결제(과금)는 발생하지 않아요.
* SDK 1.1.3 이상에서는 파트너사의 **상품 지급 로직까지 성공해야 최종 성공**으로 처리돼요.

확인해야 할 항목:

* `orderId`, `amount` 등 `event.data` 정상 반환 여부
* 내부 지급 로직 정상 동작 여부
* 지급 완료 후 화면/UI 업데이트

#### ② 결제 성공(서버 실패) 테스트

결제는 성공했지만 파트너 서버의 지급 로직이 실패하는 경우를 반드시 테스트해야 해요.

* 앱은 다음 처리를 지원해야 해요:
  * 사용자에게 지급 실패 안내
  * 앱 재실행 시 `getPendingOrders`로 미결 주문 복원
  * 지급 완료 후 `completeProductGrant` 호출

실서비스에서도 충분히 발생 가능한 시나리오이므로 반드시 테스트해야 해요.

#### ③ 에러 테스트

결제 도중 오류가 발생하는 다양한 상황을 미리 시뮬레이션하세요.

테스트해야 할 대표 상황:

* 네트워크 오류
* 사용자가 결제 취소
* 내부 오류
* 파트너사 상품 지급 실패

### 3. 테스트 체크리스트

| 테스트 항목 | 필수 | 확인 포인트 |
|---|---|---|
| 상품 목록 노출 | 필수 | 콘솔에서 등록한 상품이 정상적으로 내려오는지 |
| 결제 성공 테스트 | 필수 | `event.data` 처리, 지급 로직, UI 처리 |
| 결제 성공 + 서버 지급 실패 (주문 복원) | 필수 | 미결 주문 복원 및 재지급 처리 |
| 에러 테스트 | 필수 | 에러 UI, 오류 처리, 재시도 흐름 |
| 주문 상태 조회 API | 권장 | 서버 검증 및 정합성 확인 |

---

## QA 진행하기

인앱결제 연동을 마쳤다면 아래 항목을 **꼼꼼히 점검**해 주세요.

> **운영 팁**
>
> * 주문 키(orderId)는 단건-단결제 원칙으로 운영하고, 모든 처리 결과를 서버에 영구 저장하세요.
> * 비소모품(권한/광고 제거)은 반드시 복원(restore) 경로를 제공하세요.
> * 재요청·중복 클릭에 대비해 멱등성(idempotency)을 고려한 설계가 좋아요.

| 항목 | 내용 |
| --- | --- |
| 기본 연동 | 미니앱 주문 금액과 스토어 결제창 금액이 일치하는지 확인해주세요. |
|  | 인앱결제가 정상 진행되는지 확인해주세요. |
|  | 결제 후 미니앱 화면/서버가 동일한 결과로 처리하는지 확인해주세요. |
|  | **주문 내역 조회(영수증 검증 완료 기준)** 가 가능한지 확인해주세요. |
|  | 스토어 결제창 '취소' 시 주문 화면으로 정상 복귀하는지 확인해주세요. |
|  | 실패 시 원인 메시지가 사용자에게 명확히 노출되는지 확인해주세요. |
|  | 결제 취소/환불 안내 흐름이 준비되어 있는지 확인해주세요. |
| 데이터/권한 | 비소모품 재설치/기기변경 시 복원 흐름이 준비되어 있는지 확인해주세요. |
|  | 중복 구매/중복 지급 방지 로직이 있는지 확인해주세요. |
| 안정성 | 네트워크 장애/타임아웃 시 재시도·대체 흐름이 있는지 확인해주세요. |
|  | 앱 재시작/백그라운드 복귀 시 상태 일관성이 유지되는지 확인해주세요. |
|  | 최소 지원 버전 미만에서는 해당 상품이 노출/결제되지 않는지 확인해주세요. |
